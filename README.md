# interior_project

-- 사용자 테이블
CREATE TABLE interior_users (
    interior_user_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 사용자 고유 ID
    interior_user_username VARCHAR2(255) NOT NULL, -- 사용자 이름
    interior_user_email VARCHAR2(255) UNIQUE NOT NULL, -- 사용자 이메일 (유일성)
    interior_user_password VARCHAR2(255) NOT NULL, -- 사용자 비밀번호
    interior_user_role VARCHAR2(50) CHECK (interior_user_role IN ('admin', 'contractor')), -- 사용자 역할 (관리자 또는 업자)
    interior_user_phone VARCHAR2(20), -- 전화번호 (옵션)
    interior_user_address VARCHAR2(255), -- 주소 (옵션)
    interior_user_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- 가입일
);

-- 시공 프로젝트 테이블
CREATE TABLE interior_projects (
    interior_project_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 시공 프로젝트 고유 ID
    interior_project_user_id NUMBER NOT NULL, -- 업자 ID (외래 키)
    interior_project_name VARCHAR2(255) NOT NULL, -- 시공 사례 이름
    interior_project_description CLOB, -- 시공 사례 설명 (긴 텍스트)
    interior_project_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- 시공 사례 업로드 일시
    CONSTRAINT fk_interior_project_user FOREIGN KEY (interior_project_user_id) REFERENCES interior_users(interior_user_id) ON DELETE CASCADE -- 업자와 연결된 외래 키
);

-- 프로젝트 사진 테이블
CREATE TABLE interior_project_photos (
    interior_photo_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 사진 고유 ID
    interior_photo_project_id NUMBER NULL, -- 시공 사례 ID (외래 키, NULL 가능)
    interior_photo_review_id NUMBER NULL, -- 리뷰 ID (외래 키, NULL 가능)
    interior_photo_url VARCHAR2(500) NOT NULL, -- 사진 URL
    interior_photo_description VARCHAR2(500), -- 사진 설명
    interior_photo_uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- 사진 업로드 일시
    CONSTRAINT fk_interior_photo_project FOREIGN KEY (interior_photo_project_id) REFERENCES interior_projects(interior_project_id) ON DELETE CASCADE, -- 시공 사례와 연결된 외래 키
    CONSTRAINT fk_interior_photo_review FOREIGN KEY (interior_photo_review_id) REFERENCES interior_guest_reviews(interior_review_id) ON DELETE CASCADE -- 리뷰와 연결된 외래 키
);

-- 견적 문의 게시판 테이블
CREATE TABLE interior_estimate_requests (
    interior_estimate_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 견적 문의 고유 ID
    interior_estimate_name VARCHAR2(255) NOT NULL, -- 작성자 이름
    interior_estimate_password VARCHAR2(255) NOT NULL, -- 게시글 비밀번호
    interior_estimate_request_text CLOB NOT NULL, -- 견적 문의 내용
    interior_estimate_status VARCHAR2(50) DEFAULT '견적 문의' CHECK (interior_estimate_status IN ('견적 문의', '시공 진행', '시공 완료')), -- 요청 상태
    interior_estimate_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- 작성일
);

-- 리뷰 게시판 테이블
CREATE TABLE interior_guest_reviews (
    interior_review_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- 리뷰 고유 ID
    interior_review_project_id NUMBER NOT NULL, -- 시공 사례 ID (외래 키)
    interior_review_name VARCHAR2(255) NOT NULL, -- 작성자 이름
    interior_review_password VARCHAR2(255) NOT NULL, -- 게시글 비밀번호
    interior_review_text CLOB NOT NULL, -- 후기 내용
    interior_review_created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- 작성일
    CONSTRAINT fk_interior_review_project FOREIGN KEY (interior_review_project_id) REFERENCES interior_projects(interior_project_id) ON DELETE CASCADE -- 시공 사례와 연결된 외래 키
);

ALTER TABLE interior_estimate_requests ADD interior_estimate_title VARCHAR2(255) NOT NULL;

ALTER TABLE interior_guest_reviews ADD interior_review_title VARCHAR2(255) NOT NULL;

ALTER TABLE interior_projects ADD interior_project_title VARCHAR2(255) NOT NULL;
